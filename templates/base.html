<!DOCTYPE html>
<html lang="en" class="h-full scroll-smooth">
  {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Email IQ{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'images/logo.png' %}" />
    <link rel="apple-touch-icon" href="{% static 'images/logo.png' %}" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Include @tailwindplus/elements for header components -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Google Sans', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Helvetica Neue', 'Arial', 'sans-serif'],
            },
          },
        },
      }
    </script>
    <link rel="stylesheet" href="{% static 'css/base.css' %}" />
    <script src="{% static 'js/base_head.js' %}"></script>
    <script src="{% static 'js/edit_task_modal.js' %}"></script>
  </head>
  <body class="h-full bg-gray-100 dark:bg-gray-900 flex flex-col overflow-hidden">
    {% block header %}
    {% include 'includes/sidebar.html' %}
    {% endblock %}
    <div id="app-main-shell" class="fade-in-chrome flex flex-1 flex-col min-h-0 min-w-0 pl-0 md:pl-[87px]" data-chrome-order="2">
      <header class="fade-in-chrome sticky top-0 z-40 flex-shrink-0 px-2 sm:px-4 pt-3 pb-2" data-chrome-order="1">
        <div class="mx-auto max-w-7xl">
          <div class="rounded-xl border border-gray-200 dark:border-white/10 bg-gray-50 dark:bg-gray-800/95 shadow-sm px-3 sm:px-5 py-2.5 sm:py-3">
            <div class="grid grid-cols-[minmax(0,1fr)_auto] items-center gap-2 md:grid-cols-3">
              <h1 class="hidden sm:block min-w-0 text-base sm:text-lg font-medium tracking-tight text-gray-800 dark:text-white truncate pr-2">{% block header_title %}Jobs{% endblock %}</h1>
              <div class="flex min-w-0 items-center justify-end gap-1.5 sm:gap-2 md:col-start-3">
                {% block header_action %}{% endblock %}
              </div>
              <div class="col-start-1 row-start-1 min-w-0 overflow-x-auto md:col-span-1 md:col-start-2 md:row-start-1 md:overflow-visible [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden">
                <div class="min-w-max md:min-w-0 md:w-full md:flex md:items-center md:justify-center">
                  {% block header_center %}{% endblock %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <main class="flex-1 min-h-0 overflow-y-auto px-2 sm:px-4 pb-24 md:pb-4">
        <div class="mx-auto max-w-7xl py-3 sm:py-4">
          <!-- Toast container will be added here by JavaScript -->
          {% block content %}{% endblock %}
        </div>
      </main>
    </div>
    
    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-0 right-0 z-50 flex flex-col gap-2 p-4 pointer-events-none" style="max-width: 420px;"></div>

    <script src="{% static 'js/chrome_entrance.js' %}"></script>
    <script src="{% static 'js/card_entrance.js' %}"></script>
    <script src="{% static 'js/toast.js' %}"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        {% if messages %}
        {% for message in messages %}
        (function() {
          const messageText = '{{ message|escapejs }}';
          const messageTags = '{{ message.tags|default:"info" }}';
          const toastType = messageTags === 'error' ? 'error' : messageTags === 'success' ? 'success' : 'info';
          window.toast[toastType](messageText);
        })();
        {% endfor %}
        {% endif %}
      });
    </script>
    <script src="{% static 'js/dialog_close.js' %}"></script>
  </body>
</html>
