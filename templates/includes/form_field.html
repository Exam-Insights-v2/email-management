{% comment %}
Reusable form field component with new dark theme styling
Usage:
  {% include 'includes/form_field.html' with field=form.field_name col_span="sm:col-span-4" %}
  
Parameters:
  - field: Django form field (required)
  - col_span: Column span class (optional, defaults to "col-span-full")
{% endcomment %}

<div class="{{ col_span|default:'col-span-full' }}">
  <label for="{{ field.id_for_label }}" class="block text-sm/6 font-medium text-gray-900 dark:text-white">
    {{ field.label }}
    {% if field.field.required %}<span class="text-red-500 dark:text-red-400">*</span>{% endif %}
  </label>
  <div class="mt-2">
    {% if field.field.widget.input_type == 'textarea' %}
      <textarea id="{{ field.id_for_label }}" name="{{ field.name }}" rows="3" class="block w-full rounded-md bg-gray-100 dark:bg-white/5 px-3 py-1.5 text-base text-gray-900 dark:text-white border-0 placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:ring-2 focus:ring-cyan-600 sm:text-sm/6{% if field.errors %} border-red-500{% endif %}" {% if field.field.required %}required{% endif %}>{{ field.value|default:'' }}</textarea>
    {% elif field.field.widget.input_type == 'select' or field.field.widget.input_type == 'selectmultiple' %}
      <div class="grid grid-cols-1">
        <select id="{{ field.id_for_label }}" name="{{ field.name }}" {% if field.field.widget.attrs.multiple %}multiple{% endif %} class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-gray-100 dark:bg-white/5 py-1.5 pr-8 pl-3 text-base text-gray-900 dark:text-white border-0 *:bg-white dark:*:bg-gray-800 focus:ring-2 focus:ring-cyan-600 sm:text-sm/6{% if field.errors %} border-red-500{% endif %}" {% if field.field.required %}required{% endif %}>
          {{ field }}
        </select>
        <i class="ti ti-chevron-down pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-400 sm:size-4" aria-hidden="true"></i>
      </div>
    {% elif field.field.widget.input_type == 'checkbox' %}
      <div class="flex gap-3">
        <div class="flex h-6 shrink-0 items-center">
          <div class="group grid size-4 grid-cols-1">
            <input id="{{ field.id_for_label }}" type="checkbox" name="{{ field.name }}" {% if field.value %}checked{% endif %} class="col-start-1 row-start-1 appearance-none rounded-sm border border-white/10 bg-white/5 checked:border-cyan-600 checked:bg-cyan-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-cyan-600{% if field.errors %} border-red-500{% endif %}" {% if field.field.required %}required{% endif %} />
            <i class="ti ti-check pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center text-white opacity-0 group-has-checked:opacity-100" aria-hidden="true"></i>
          </div>
        </div>
        {% if field.help_text %}
        <div class="text-sm/6">
          <p class="text-gray-600 dark:text-gray-400">{{ field.help_text }}</p>
        </div>
        {% endif %}
      </div>
    {% else %}
      <input id="{{ field.id_for_label }}" type="{{ field.field.widget.input_type|default:'text' }}" name="{{ field.name }}" value="{{ field.value|default:'' }}" {% if field.field.widget.attrs.placeholder %}placeholder="{{ field.field.widget.attrs.placeholder }}"{% endif %} class="block w-full rounded-md bg-gray-100 dark:bg-white/5 px-3 py-1.5 text-base text-gray-900 dark:text-white border-0 placeholder:text-gray-500 dark:placeholder:text-gray-400 focus:ring-2 focus:ring-cyan-600 sm:text-sm/6{% if field.errors %} border-red-500{% endif %}" {% if field.field.required %}required{% endif %} />
    {% endif %}
  </div>
  {% if field.help_text and field.field.widget.input_type != 'checkbox' %}
  <p class="mt-3 text-sm/6 text-gray-600 dark:text-gray-400">{{ field.help_text }}</p>
  {% endif %}
  {% if field.errors %}
  <p class="mt-2 text-sm/6 text-red-600 dark:text-red-400">{{ field.errors }}</p>
  {% endif %}
</div>
