<!DOCTYPE html>
<html lang="en" class="h-full">
  {% load static %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Email IQ{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'images/logo.png' %}" />
    <link rel="apple-touch-icon" href="{% static 'images/logo.png' %}" />
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/base_auth.css' %}" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Google Sans', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Helvetica Neue', 'Arial', 'sans-serif'],
            },
          },
        },
      }
    </script>
    <script src="{% static 'js/theme.js' %}"></script>
  </head>
  <body class="h-full bg-white dark:bg-gray-900">
    <!-- Theme Toggle Button -->
    <div class="fade-in-chrome fixed top-4 right-4 z-50" data-chrome-order="0">
      <button
        onclick="toggleTheme()"
        class="flex items-center justify-center w-10 h-10 text-gray-700 shadow-none"
        aria-label="Toggle theme"
        title="Toggle light/dark mode"
      >
        <span class="material-icons size-5 dark:hidden">wb_sunny</span>
        <span class="material-icons size-5 hidden dark:inline">nights_stay</span>
      </button>
    </div>
    {% block content %}{% endblock %}
    
    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-0 right-0 z-50 flex flex-col gap-2 p-4 pointer-events-none" style="max-width: 420px;"></div>

    <script src="{% static 'js/auth_entrance.js' %}"></script>
    <script src="{% static 'js/toast.js' %}"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        {% if messages %}
        {% for message in messages %}
        (function() {
          const messageText = '{{ message|escapejs }}';
          const messageTags = '{{ message.tags|default:"info" }}';
          const toastType = messageTags === 'error' ? 'error' : messageTags === 'success' ? 'success' : 'info';
          window.toast[toastType](messageText);
        })();
        {% endfor %}
        {% endif %}
      });
    </script>
  </body>
</html>
